    <!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <title> Upgrade CentOS kernel without Reboot using Ksplice &middot; M. Fahrizal Rahman </title>
    
    <link rel="stylesheet" type="text/css" href="https://riesal.github.io/css/uno.min.css" />
    <link rel="stylesheet" type="text/css" href="https://riesal.github.io/css/lightGallery.css" />
    
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.ico">
    
    <link href="" rel="alternate" type="application/rss+xml" title="M. Fahrizal Rahman" />
    
    <script src="https://riesal.github.io/js/jquery.min.js"></script>
    <script src="https://riesal.github.io/js/main.min.js">
    </script>
</head>

    <body>
        <div id="scriptHeader">
    <span class="mobile btn-mobile-menu">
            <i class="fa fa-bars btn-mobile-menu__icon"></i>
            <i class="fa fa-times btn-mobile-close__icon hidden"> </i>
    </span>
    <header class="
        
            panel-cover panel-cover--collapsed
        "  style="background-image: url(/images/background-cover.jpg)" >
    <div class="panel-main">
        <div class="panel-main__inner panel-inverted">
            <div class="panel-main__content"> 
                <a href="https://riesal.github.io/" title="link to homepage for M. Fahrizal Rahman"> <img src="https://eastlondonnews.co.uk/wp-content/uploads/2014/04/write-your-own-blog.jpg" width="80" alt="M. Fahrizal Rahman logo" class="panel-cover__logo logo" /> </a> 
                <h1 class="panel-cover__title panel-title">
                    <a href="https://riesal.github.io/"  title="link to homepage for M. Fahrizal Rahman">M. Fahrizal Rahman</a>
                </h1>
                <hr class="panel-cover__divider" />
                <p class="panel-cover__description">  Passionate Reader / Intispace.com  </p>
                <hr class="panel-cover__divider panel-cover__divider--secondary" />
                <div class="navigation-wrapper">
                    <nav class="cover-navigation cover-navigation--primary">
                        <ul class="navigation">
                            <li class="navigation__item"><a href="https://riesal.github.io#blog" title="link to M. Fahrizal Rahman blog" class="blog-button">View Posts</a> </li></br>
			    <li class="navigation__item"><a href="/post/" title="link to M. Fahrizal Rahman archive" class="blog-button">Archive</a> </li></br>
                            
                       </ul>
                    </nav> <nav class="cover-navigation navigation--social">
    <ul class="navigation"> 
        
        <li class="navigation__item">
            <a href="http://twitter.com/siriesal" title="@siriesal on Twitter"> <i class='fa fa-twitter'></i> <span class="label">Twitter</span> </a>
        </li>  
        
        <li class="navigation__item">
            <a href="https://bitbucket.org/riesal" title="riesal on bitbucket"> <i class='fa fa-bitbucket'></i> <span class="label">Bitbucket</span> </a>
        </li>  
        
        <li class="navigation__item">
            <a href="https://github.com/riesal" title="riesal on github"> <i class='fa fa-github'></i> <span class="label">Github</span> </a>
        </li>  </br> 
        
        <li class="navigation__item">
            <a href="http://www.flickr.com/photos/riesal/" title="riesal on flickr"> <i class='fa fa-flickr'></i> <span class="label">Flickr</span> </a>
        </li>  
        
        <li class="navigation__item">
            <a href="https://www.linkedin.com/in/riesal" title="Linkedin"> <i class='fa fa-linkedin'></i> <span class="label">Linkedin</span> </a>
        </li>  
        
        <li class="navigation__item">
            <a href="mailto:ask@intispace.com" title="Email ask@intispace.com"> <i class='fa fa-envelope-o'></i> <span class="label">Email</span> </a>
        </li>  </ul>
</nav>
 </div>
            </div>
        </div>
        <div class="panel-cover--overlay"></div>
    </div>
</header>
</div>
<noscript>
    <style>
        #scriptHeader {display:none;}
        .navigation-wrapper{
            display: block;
            top: 0;
        }
    </style>

    <header class="panel-cover panel-cover--collapsed" style="background-image: url(/images/background-cover.jpg)">
        <div class="panel-main">
            <div class="panel-main__inner panel-inverted">
                <div class="panel-main__content"> 
                    <a href="https://riesal.github.io/" title="link to homepage for M. Fahrizal Rahman"> <img src="https://eastlondonnews.co.uk/wp-content/uploads/2014/04/write-your-own-blog.jpg" width="80" alt="M. Fahrizal Rahman logo" class="panel-cover__logo logo" /> </a> 
                    <h1 class="panel-cover__title panel-title">
                        <a href="https://riesal.github.io/"  title="link to homepage for M. Fahrizal Rahman">M. Fahrizal Rahman</a>
                    </h1>
                    <hr class="panel-cover__divider" />
                    <p class="panel-cover__description">  Passionate Reader / Intispace.com  </p>
                    <hr class="panel-cover__divider panel-cover__divider--secondary" />
                    <div class="navigation-wrapper">
                        <nav class="cover-navigation cover-navigation--primary">
                            <ul class="navigation">
                                <li class="navigation__item"><a href="https://riesal.github.io/#blog" title="link to M. Fahrizal Rahman blog" class="blog-button">Blog</a> </li></br>
                                <li class="navigation__item"><a href="/pages/cv" title="link to my CV " class="blog-button">CV</a> </li></br> 
				
                           </ul>
                        </nav> <nav class="cover-navigation navigation--social">
    <ul class="navigation"> 
        
        <li class="navigation__item">
            <a href="http://twitter.com/siriesal" title="@siriesal on Twitter"> <i class='fa fa-twitter'></i> <span class="label">Twitter</span> </a>
        </li>  
        
        <li class="navigation__item">
            <a href="https://bitbucket.org/riesal" title="riesal on bitbucket"> <i class='fa fa-bitbucket'></i> <span class="label">Bitbucket</span> </a>
        </li>  
        
        <li class="navigation__item">
            <a href="https://github.com/riesal" title="riesal on github"> <i class='fa fa-github'></i> <span class="label">Github</span> </a>
        </li>  </br> 
        
        <li class="navigation__item">
            <a href="http://www.flickr.com/photos/riesal/" title="riesal on flickr"> <i class='fa fa-flickr'></i> <span class="label">Flickr</span> </a>
        </li>  
        
        <li class="navigation__item">
            <a href="https://www.linkedin.com/in/riesal" title="Linkedin"> <i class='fa fa-linkedin'></i> <span class="label">Linkedin</span> </a>
        </li>  
        
        <li class="navigation__item">
            <a href="mailto:ask@intispace.com" title="Email ask@intispace.com"> <i class='fa fa-envelope-o'></i> <span class="label">Email</span> </a>
        </li>  </ul>
</nav>
 </div>
                </div>
            </div>
            <div class="panel-cover--overlay"></div>
        </div>
    </header>
</noscript>

        <div class="content-wrapper">
            <div class="content-wrapper__inner">
                <div class="post">
                    <h1>Upgrade CentOS kernel without Reboot using Ksplice</h1>
                    <span class="post-date">Wed, Aug 24, 2016</span>
                    <p><strong>It is simply how to allow kernel swap without needing reboot.</strong></p>

<p>Generally, all Linux distributions needs a scheduled reboot once to stay up to date with important kernel security updates. RHN (or other distro vendors) provides Linux kernel security updates.</p>

<p><span id="more-4512"></span></p>

<p>You can apply kernel updates using yum command or apt-get command line options. After each upgrade you need to reboot the server. Ksplice service allows you to skip reboot step and apply hotfixes to kernel without rebooting the server. In this post I will cover a quick installation of Ksplice for RHEL 5.x and try to find out if service is worth every penny.</p>

<p>The technology and hack behind this looks pretty cool. This is useful if you’ve a small number of Linux based servers and/or you want avoid unscheduled reboot just to apply hotfix to Linux kernel.</p>

<p>How Do I Install Ksplice?</p>

<p>First, you need to register with Ksplice. Type the following command to install rpm repo under RHEL 5:</p>

<pre><code>rpm -ivh https://www.ksplice.com/yum/uptrack/centos/ksplice-uptrack-release.noarch.rpm
</code></pre>

<p>To install Ksplice, enter:</p>

<pre><code>yum install uptrack
</code></pre>

<p>Edit /etc/uptrack/uptrack.conf, enter:</p>

<pre><code>vi /etc/uptrack/uptrack.conf
</code></pre>

<p>Update it as follows (input your access key):</p>

<p>[Auth]</br>
accesskey = ADD-YOUR-ACCESS-KEY-HERE</br>
[Network]</br>
https_proxy = </br>
[Settings]</br>
install_on_reboot = yes</br>
autoinstall = no</br>
cron_output_install = no</br>
cron_output_available = no</br>
cron_output_error = no</br></p>

<p>Save and close the file.</p>

<p>How Do I Apply Rebootless Kernel Updates?
You need to first download and apply updates via RHN:</p>

<pre><code>yum -y update
</code></pre>

<p>OR</p>

<pre><code>yum update kernel kernel-headers kernel-devel
</code></pre>

<p>Don’t reboot the box, simply type the following command to apply hotfix:</p>

<pre><code>uptrack-upgrade
</code></pre>

<p>To see a list of updates that are currently installed, enter:</p>

<pre><code>uptrack-show -y
</code></pre>

<p>Sample Email Notification
You will get an email as follows when updates are available:</p>

<p><img src="http://s0.cyberciti.org/uploads/tips/2010/04/ksplice-rhel-update-email.png" alt="Fig.01: Ksplice Update Notification" /></p>

<p>The web interface also provides information about your server and installed kernel updates:
<img src="http://s0.cyberciti.org/uploads/tips/2010/04/uptrack-web-interface.png" alt="Fig.02: Uptrack Web Interface" /></p>

<p>Conclusion</p>

<p>The pricing is as follows:</p>

<ul>
<li>Monthly price per system First 20 servers : $3.95</li>
<li>Beyond 20 servers: $2.95</li>
<li>Currently it is free for all Ubuntu users.</li>
</ul>

<p>Ksplice is a pretty good and stable software. This is useful for Linux admin or business who can not accept downtime for patching. A few business comes in my mind:</p>

<ul>
<li>Small shop, say 8-12 Linux based servers.</li>
<li>Pro-blogging or webmaster servers (a typical setup included one web
server and one db server). Avoiding downtime means more ad revenue
for webmasters.</li>
<li>Hosting companies – again avoiding downtime means good customer
satisfactions and less work for sys admins. If you run VM based
hosting (OpenVZ or XEN based vps) you can avoid downtime too.</li>
<li>Small cluster of Linux system, say 6 system – If cluster is using 80%
of capacity and if one of node rebooted for kernel upgrade, load will
up for rest of 5 systems. In such case, this service can help to keep
load under control without rebooting the box. However, this is NOT
very useful for very large Linux based cluster redundant
load-balanced servers, routers, switches, firewalls etc. Since your
cluster is so large that 4-5 servers failing makes no difference to
the remaining nodes. In some cases it is possible to do geo load
balancing too.</li>
</ul>

<p>But I’ve HA Failover Solution In Place…
100% uptime depends upon lots of factors and and HA solution handles hardware or other failures very well. However, <em>Ksplice service is not all about 100% uptime</em>, <strong>it is about not rebooting your server for a Linux kernel upgrade</strong>. You can easily combine Ksplice with HA solution (such as keepalived+nginx reverse proxy) and try to get perfect five 9s. I highly recommend this service for small to medium size business or professional webmasters.</p>

                </div>
            </div>
        </div>
    </body>
    
</html>
